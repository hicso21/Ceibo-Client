{"ast":null,"code":"import React,{useEffect}from\"react\";import jwt_decode from\"jwt-decode\";import{useDispatch}from\"react-redux\";import{sendLoginRequest}from\"../state/user\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var GoogleLogin=function GoogleLogin(){var navigate=useNavigate();var dispatch=useDispatch();//const user = useSelector((state) => state.user);\nfunction handleCallbackResponse(response){var userObject=jwt_decode(response.credential);dispatch(sendLoginRequest({google:true,name:userObject.given_name,last_name:userObject.family_name,email:userObject.email,profile_picture:userObject.picture,password:userObject.jti})).then(function(resp){localStorage.setItem('google',true);navigate('/');});}useEffect(function(){/* global google */google.accounts&&google.accounts.id.initialize({client_id:\"1083142913474-3tk7dpgpmn8t4blneh5rc0c6go2sl0rg.apps.googleusercontent.com\",callback:handleCallbackResponse});google.accounts.id.renderButton(document.getElementById(\"signInDiv\"),{theme:\"outline\",size:\"large\"});},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{id:\"signInDiv\"})});};export default GoogleLogin;","map":{"version":3,"names":["React","useEffect","jwt_decode","useDispatch","sendLoginRequest","useNavigate","GoogleLogin","navigate","dispatch","handleCallbackResponse","response","userObject","credential","google","name","given_name","last_name","family_name","email","profile_picture","picture","password","jti","then","resp","localStorage","setItem","accounts","id","initialize","client_id","callback","renderButton","document","getElementById","theme","size"],"sources":["/home/tomas/p5/checkpoints/Ceibo/client/src/components/GoogleLogin.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport { sendLoginRequest } from \"../state/user\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst GoogleLogin = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  //const user = useSelector((state) => state.user);\n\n  function handleCallbackResponse(response) {\n    const userObject = jwt_decode(response.credential);\n\n    dispatch(\n      sendLoginRequest({\n        google: true,\n        name: userObject.given_name,\n        last_name: userObject.family_name,\n        email: userObject.email,\n        profile_picture: userObject.picture,\n        password: userObject.jti\n      })\n    )\n    .then(resp=>{\n      localStorage.setItem('google', true)\n      navigate('/')\n    })\n  }\n\n  useEffect(() => {\n    /* global google */\n    google.accounts &&\n      google.accounts.id.initialize({\n        client_id: \"1083142913474-3tk7dpgpmn8t4blneh5rc0c6go2sl0rg.apps.googleusercontent.com\",\n        callback: handleCallbackResponse,\n      });\n    google.accounts.id.renderButton(\n      document.getElementById(\"signInDiv\"), \n      { theme: \"outline\", size: \"large\"}\n    );\n  }, []);\n\n  return (\n    <div>\n      <div id=\"signInDiv\"></div>\n    </div>\n  );\n};\n\nexport default GoogleLogin;\n"],"mappings":"AAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,WAAP,KAAuB,YAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,gBAAT,KAAiC,eAAjC,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,2CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB,GAAMC,SAAQ,CAAGF,WAAW,EAA5B,CACA,GAAMG,SAAQ,CAAGL,WAAW,EAA5B,CAEA;AAEA,QAASM,uBAAT,CAAgCC,QAAhC,CAA0C,CACxC,GAAMC,WAAU,CAAGT,UAAU,CAACQ,QAAQ,CAACE,UAAV,CAA7B,CAEAJ,QAAQ,CACNJ,gBAAgB,CAAC,CACfS,MAAM,CAAE,IADO,CAEfC,IAAI,CAAEH,UAAU,CAACI,UAFF,CAGfC,SAAS,CAAEL,UAAU,CAACM,WAHP,CAIfC,KAAK,CAAEP,UAAU,CAACO,KAJH,CAKfC,eAAe,CAAER,UAAU,CAACS,OALb,CAMfC,QAAQ,CAAEV,UAAU,CAACW,GANN,CAAD,CADV,CAAR,CAUCC,IAVD,CAUM,SAAAC,IAAI,CAAE,CACVC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+B,IAA/B,EACAnB,QAAQ,CAAC,GAAD,CAAR,CACD,CAbD,EAcD,CAEDN,SAAS,CAAC,UAAM,CACd,mBACAY,MAAM,CAACc,QAAP,EACEd,MAAM,CAACc,QAAP,CAAgBC,EAAhB,CAAmBC,UAAnB,CAA8B,CAC5BC,SAAS,CAAE,2EADiB,CAE5BC,QAAQ,CAAEtB,sBAFkB,CAA9B,CADF,CAKAI,MAAM,CAACc,QAAP,CAAgBC,EAAhB,CAAmBI,YAAnB,CACEC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CADF,CAEE,CAAEC,KAAK,CAAE,SAAT,CAAoBC,IAAI,CAAE,OAA1B,CAFF,EAID,CAXQ,CAWN,EAXM,CAAT,CAaA,mBACE,kCACE,YAAK,EAAE,CAAC,WAAR,EADF,EADF,CAKD,CA3CD,CA6CA,cAAe9B,YAAf"},"metadata":{},"sourceType":"module"}