{"ast":null,"code":"import axios from \"axios\";\nimport { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const sendLoginRequest = createAsyncThunk(\"LOGIN\", input => {\n  return axios.post(\"http://localhost:3001/api/user/login\", input, {\n    withCredentials: true,\n    credentials: 'include'\n  }).then(r => r.data).catch(err => console.log(err));\n});\nexport const sendSignUpRequest = createAsyncThunk(\"SIGNUP\", input => {\n  return axios.post(\"http://localhost:3001/api/user/register\", input, {\n    withCredentials: true,\n    credentials: 'include'\n  }).then(r => r.data).catch(err => console.log(err));\n});\nexport const sendLogoutRequest = createAsyncThunk(\"LOGOUT\", () => {\n  localStorage.removeItem('google');\n  document.cookie = \"token= \";\n  return axios.post(\"http://localhost:3001/api/user/logout\", {\n    withCredentials: true,\n    credentials: 'include'\n  }).then(r => r).catch(err => console.log(err));\n});\nexport const setUser = createAsyncThunk(\"SETUSER\", () => {\n  const user = axios.get(\"http://localhost:3001/api/user/me\", {\n    withCredentials: true,\n    credentials: \"include\"\n  }).then(() => {\n    if (localStorage.getItem('google') === true) user.google = true;\n  });\n});\nconst userReducer = createReducer({}, {\n  [sendLoginRequest.fulfilled]: (state, action) => action.payload,\n  [sendLogoutRequest.fulfilled]: (state, action) => action.payload,\n  [sendSignUpRequest.fulfilled]: (state, action) => action.payload,\n  [setUser.fulfilled]: (state, action) => action.payload\n});\nexport default userReducer;","map":{"version":3,"names":["axios","createReducer","createAsyncThunk","sendLoginRequest","input","post","withCredentials","credentials","then","r","data","catch","err","console","log","sendSignUpRequest","sendLogoutRequest","localStorage","removeItem","document","cookie","setUser","user","get","getItem","google","userReducer","fulfilled","state","action","payload"],"sources":["/home/tomas/p5/checkpoints/Ceibo/client/src/state/user.js"],"sourcesContent":["import axios from \"axios\";\nimport { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\n\n\nexport const sendLoginRequest = createAsyncThunk(\"LOGIN\", (input) => {\n  return  axios\n            .post(\n              \"http://localhost:3001/api/user/login\",\n              input, \n              { withCredentials: true, credentials: 'include'})\n            .then((r)=> r.data)\n            .catch((err)=> console.log(err))\n});\n\nexport const sendSignUpRequest = createAsyncThunk(\"SIGNUP\", (input) => {\n  return axios\n              .post(\n                \"http://localhost:3001/api/user/register\",\n                input,\n                { withCredentials: true, credentials: 'include' })\n              .then((r)=> r.data)\n              .catch((err)=> console.log(err))\n});\n\nexport const sendLogoutRequest = createAsyncThunk(\"LOGOUT\", () => {\n  localStorage.removeItem('google')\n  document.cookie = \"token= \"\n  return  axios\n            .post(\"http://localhost:3001/api/user/logout\", \n            { withCredentials: true, credentials: 'include' })\n            .then((r)=> r)\n            .catch((err)=> console.log(err))\n});\n\nexport const setUser = createAsyncThunk(\"SETUSER\", () => {\n  const user = axios\n                    .get(\"http://localhost:3001/api/user/me\", \n                    { withCredentials: true, credentials: \"include\"}\n                    )\n                    .then(()=>{\n                      if(localStorage.getItem('google') === true) user.google = true\n                    })\n  \n\n});\n\nconst userReducer = createReducer({}, {\n  [sendLoginRequest.fulfilled]: (state, action) => action.payload,\n  [sendLogoutRequest.fulfilled]: (state, action) => action.payload,\n  [sendSignUpRequest.fulfilled]: (state, action) => action.payload,\n  [setUser.fulfilled]: (state, action) => action.payload,\n});\n\nexport default userReducer;"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,kBAAhD;AAGA,OAAO,MAAMC,gBAAgB,GAAGD,gBAAgB,CAAC,OAAD,EAAWE,KAAD,IAAW;EACnE,OAAQJ,KAAK,CACFK,IADH,CAEI,sCAFJ,EAGID,KAHJ,EAII;IAAEE,eAAe,EAAE,IAAnB;IAAyBC,WAAW,EAAE;EAAtC,CAJJ,EAKGC,IALH,CAKSC,CAAD,IAAMA,CAAC,CAACC,IALhB,EAMGC,KANH,CAMUC,GAAD,IAAQC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANjB,CAAR;AAOD,CAR+C,CAAzC;AAUP,OAAO,MAAMG,iBAAiB,GAAGb,gBAAgB,CAAC,QAAD,EAAYE,KAAD,IAAW;EACrE,OAAOJ,KAAK,CACCK,IADN,CAEO,yCAFP,EAGOD,KAHP,EAIO;IAAEE,eAAe,EAAE,IAAnB;IAAyBC,WAAW,EAAE;EAAtC,CAJP,EAKMC,IALN,CAKYC,CAAD,IAAMA,CAAC,CAACC,IALnB,EAMMC,KANN,CAMaC,GAAD,IAAQC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANpB,CAAP;AAOD,CARgD,CAA1C;AAUP,OAAO,MAAMI,iBAAiB,GAAGd,gBAAgB,CAAC,QAAD,EAAW,MAAM;EAChEe,YAAY,CAACC,UAAb,CAAwB,QAAxB;EACAC,QAAQ,CAACC,MAAT,GAAkB,SAAlB;EACA,OAAQpB,KAAK,CACFK,IADH,CACQ,uCADR,EAEE;IAAEC,eAAe,EAAE,IAAnB;IAAyBC,WAAW,EAAE;EAAtC,CAFF,EAGGC,IAHH,CAGSC,CAAD,IAAMA,CAHd,EAIGE,KAJH,CAIUC,GAAD,IAAQC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAJjB,CAAR;AAKD,CARgD,CAA1C;AAUP,OAAO,MAAMS,OAAO,GAAGnB,gBAAgB,CAAC,SAAD,EAAY,MAAM;EACvD,MAAMoB,IAAI,GAAGtB,KAAK,CACCuB,GADN,CACU,mCADV,EAEK;IAAEjB,eAAe,EAAE,IAAnB;IAAyBC,WAAW,EAAE;EAAtC,CAFL,EAIMC,IAJN,CAIW,MAAI;IACR,IAAGS,YAAY,CAACO,OAAb,CAAqB,QAArB,MAAmC,IAAtC,EAA4CF,IAAI,CAACG,MAAL,GAAc,IAAd;EAC7C,CANN,CAAb;AASD,CAVsC,CAAhC;AAYP,MAAMC,WAAW,GAAGzB,aAAa,CAAC,EAAD,EAAK;EACpC,CAACE,gBAAgB,CAACwB,SAAlB,GAA8B,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC,OADpB;EAEpC,CAACd,iBAAiB,CAACW,SAAnB,GAA+B,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC,OAFrB;EAGpC,CAACf,iBAAiB,CAACY,SAAnB,GAA+B,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC,OAHrB;EAIpC,CAACT,OAAO,CAACM,SAAT,GAAqB,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC;AAJX,CAAL,CAAjC;AAOA,eAAeJ,WAAf"},"metadata":{},"sourceType":"module"}