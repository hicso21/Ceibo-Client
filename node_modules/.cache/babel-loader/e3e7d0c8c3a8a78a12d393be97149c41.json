{"ast":null,"code":"var _jsxFileName = \"/home/tomas/p5/checkpoints/Ceibo/client/src/components/Messages.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Divider from \"@mui/material/Divider\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport Avatar from \"@mui/material/Avatar\";\nimport Typography from \"@mui/material/Typography\";\nimport axios from \"axios\";\nimport { Box } from \"@mui/material\";\nimport useMatches from \"../hooks/useMatches\";\nimport { styled } from \"@mui/material/styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DrawerHeader = styled(\"div\")(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: \"flex-end\"\n  };\n});\n_c = DrawerHeader;\nexport default function Messages() {\n  _s();\n\n  const [foundations, setFoundations] = useState([]);\n  const matches = useMatches();\n  const user = useSelector(state => state.user);\n  let pL;\n  let pR;\n  let typography;\n\n  if (matches) {\n    pL = 10;\n    pR = 10;\n    typography = \"h3\";\n  } else {\n    pL = 5;\n    pR = 5;\n    typography = \"h4\";\n  }\n\n  useEffect(() => {\n    axios.get(`http://localhost:3001/api/messages/user/${user._id}`).then(res => {\n      const reversedData = res.data.reverse();\n      let result = [];\n      reversedData.forEach(item => {\n        let id = item.fId._id;\n        let ids = result.map(e => e.fId._id);\n\n        if (!ids.includes(id)) {\n          result.push(item);\n        }\n      });\n      setFoundations(result);\n    }).then(console.log('holaa'));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: 530,\n      paddingTop: 6,\n      width: \"100%\",\n      paddingLeft: pR,\n      paddingRight: pL\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"title\",\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: typography,\n        children: \"Conversaciones\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), foundations ? /*#__PURE__*/_jsxDEV(List, {\n      sx: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        width: \"100%\",\n        bgcolor: \"background.paper\",\n        pb: 0\n      },\n      children: foundations.map((item, i) => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/chat/${item.fId._id}`,\n        style: {\n          textDecoration: \"none\",\n          color: \"inherit\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(ListItem, {\n          alignItems: \"flex-start\",\n          children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              alt: \"\",\n              src: item.fId.profile_picture\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n            primary: /*#__PURE__*/_jsxDEV(Typography, {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: item.fId.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 21\n            }, this),\n            secondary: /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  display: \"inline\"\n                },\n                component: \"span\",\n                variant: \"body2\",\n                color: \"text.primary\",\n                children: \"\\xDAltimo mensaje\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 23\n              }, this), ` — ${item.user}: ${item.message}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), foundations.length - 1 === i ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(Divider, {\n          variant: \"inset\",\n          component: \"li\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        sx: {\n          width: \"100%\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          mt: 5\n        },\n        children: \"A\\xFAn no tienes conversaciones\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this), matches ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(DrawerHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Messages, \"YPXBGKu2a5dvIH3MljDC8t0Wb5k=\", false, function () {\n  return [useMatches, useSelector];\n});\n\n_c2 = Messages;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DrawerHeader\");\n$RefreshReg$(_c2, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","Link","useDispatch","useSelector","List","ListItem","Divider","ListItemText","ListItemAvatar","Avatar","Typography","axios","Box","useMatches","styled","DrawerHeader","theme","display","alignItems","padding","spacing","mixins","toolbar","justifyContent","Messages","foundations","setFoundations","matches","user","state","pL","pR","typography","get","_id","then","res","reversedData","data","reverse","result","forEach","item","id","fId","ids","map","e","includes","push","console","log","minHeight","paddingTop","width","paddingLeft","paddingRight","flexDirection","bgcolor","pb","i","textDecoration","color","profile_picture","name","message","length","mt"],"sources":["/home/tomas/p5/checkpoints/Ceibo/client/src/components/Messages.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Divider from \"@mui/material/Divider\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport Avatar from \"@mui/material/Avatar\";\nimport Typography from \"@mui/material/Typography\";\nimport axios from \"axios\";\nimport { Box } from \"@mui/material\";\nimport useMatches from \"../hooks/useMatches\";\nimport { styled } from \"@mui/material/styles\";\n\nconst DrawerHeader = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  padding: theme.spacing(0, 1),\n  // necessary for content to be below app bar\n  ...theme.mixins.toolbar,\n  justifyContent: \"flex-end\",\n}));\n\nexport default function Messages() {\n  const [foundations, setFoundations] = useState([]);\n  const matches = useMatches();\n  const user = useSelector((state) => state.user);\n\n  let pL;\n  let pR;\n  let typography;\n\n  if (matches) {\n    pL = 10;\n    pR = 10;\n    typography = \"h3\";\n  } else {\n    pL = 5;\n    pR = 5;\n    typography = \"h4\";\n  }\n\n  useEffect(() => {\n    axios\n      .get(`http://localhost:3001/api/messages/user/${user._id}`)\n      .then((res) => {\n        const reversedData = res.data.reverse();\n        let result = [];\n\n        reversedData.forEach((item) => {\n          let id = item.fId._id;\n          let ids = result.map((e) => e.fId._id);\n          if (!ids.includes(id)) {\n            result.push(item);\n          }\n        });\n\n        setFoundations(result);\n      }).then(console.log('holaa'))\n  }, []);\n\n  return (\n    <Box\n      sx={{\n        minHeight: 530,\n        paddingTop: 6,\n        width: \"100%\",\n        paddingLeft: pR,\n        paddingRight: pL,\n      }}\n    >\n      <div id=\"title\">\n        <Typography variant={typography}>Conversaciones</Typography>\n      </div>\n      <br />\n      {foundations ? (\n        <List\n          sx={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            width: \"100%\",\n            bgcolor: \"background.paper\",\n            pb: 0,\n          }}\n        >\n          {foundations.map((item, i) => (\n            <Link\n              key={item._id}\n              to={`/chat/${item.fId._id}`}\n              style={{\n                textDecoration: \"none\",\n                color: \"inherit\",\n              }}\n            >\n              <ListItem alignItems=\"flex-start\">\n                <ListItemAvatar>\n                  <Avatar alt=\"\" src={item.fId.profile_picture} />\n                </ListItemAvatar>\n                <ListItemText\n                  primary={\n                    <Typography>\n                      <strong>{item.fId.name}</strong>\n                    </Typography>\n                  }\n                  secondary={\n                    <React.Fragment>\n                      <Typography\n                        sx={{ display: \"inline\" }}\n                        component=\"span\"\n                        variant=\"body2\"\n                        color=\"text.primary\"\n                      >\n                        Último mensaje\n                      </Typography>\n                      {` — ${item.user}: ${item.message}`}\n                    </React.Fragment>\n                  }\n                />\n              </ListItem>\n              {foundations.length - 1 === i ? (\n                <></>\n              ) : (\n                <Divider variant=\"inset\" component=\"li\" />\n              )}\n            </Link>\n          ))}\n        </List>\n      ) : (\n        <div>\n          <Typography\n            variant=\"h4\"\n            sx={{\n              width: \"100%\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              mt: 5,\n            }}\n          >\n            Aún no tienes conversaciones\n          </Typography>\n        </div>\n      )}\n      {matches ? <></> : <DrawerHeader />}\n    </Box>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}